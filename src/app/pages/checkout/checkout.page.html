<ion-content class="checkout-page">
  <div class="checkout-layout">
    
    <!-- LEFT COLUMN: Order Summary / Cart -->
    <div class="cart-section">
      
      <!-- Total Display -->
      <div class="total-display">
        <div class="total-label">Total</div>
        <div class="total-amount">{{ cartSummary().total | number:'1.2-2' }}</div>
      </div>

      <!-- Order Items List -->
      <div class="items-list">
        @for (item of cartItems(); track item.product._id) {
          <div class="order-item">
            <div class="item-name">{{ item.product.name }}</div>
            <div class="item-details">
              <span class="item-qty">{{ item.quantity }}</span>
              <span class="item-price">{{ item.price | number:'1.2-2' }}</span>
              <span class="item-total">{{ item.total | number:'1.2-2' }}</span>
            </div>
          </div>
        }
      </div>

      <!-- Summary Totals -->
      <div class="summary-totals">
        <div class="summary-row">
          <span>Subtotal</span>
          <span>{{ cartSummary().subtotal | number:'1.2-2' }}</span>
        </div>
        @if (cartSummary().tax > 0) {
          <div class="summary-row">
            <span>Tax</span>
            <span>{{ cartSummary().tax | number:'1.2-2' }}</span>
          </div>
        }
        @if (cartSummary().discount > 0) {
          <div class="summary-row discount">
            <span>Discount</span>
            <span>-{{ cartSummary().discount | number:'1.2-2' }}</span>
          </div>
        }
        <div class="summary-row total-row">
          <span>TOTAL</span>
          <span>{{ cartSummary().total | number:'1.2-2' }}</span>
        </div>
        @if (amountPaid() > 0) {
          <div class="summary-row">
            <span>Tendered</span>
            <span>{{ amountPaid() | number:'1.2-2' }}</span>
          </div>
        }
        @if (change() > 0) {
          <div class="summary-row change">
            <span>Change</span>
            <span>{{ change() | number:'1.2-2' }}</span>
          </div>
        }
      </div>

    </div>

    <!-- MIDDLE COLUMN: Numpad Area -->
    <div class="numpad-section">
      
      <!-- Amount Display -->
      <div class="amount-display">
        <div class="amount-label">Charged</div>
        <div class="amount-value">{{ amountPaid() }}</div>
      </div>

      <div class="numpad-grid">
        
        <!-- LEFT: Quick Amounts (vertical) -->
        <div class="quick-amounts-left">
          <button class="quick-btn" (click)="setAmount(1)">1</button>
          <button class="quick-btn" (click)="setAmount(2)">2</button>
          <button class="quick-btn" (click)="setAmount(5)">5</button>
          <button class="quick-btn" (click)="setAmount(10)">10</button>
        </div>

        <!-- CENTER: Keypad -->
        <div class="keypad-center">
          <div class="keypad">
            <button class="key-button" (click)="addDigit('7')">7</button>
            <button class="key-button" (click)="addDigit('8')">8</button>
            <button class="key-button" (click)="addDigit('9')">9</button>
            
            <button class="key-button" (click)="addDigit('4')">4</button>
            <button class="key-button" (click)="addDigit('5')">5</button>
            <button class="key-button" (click)="addDigit('6')">6</button>
            
            <button class="key-button" (click)="addDigit('1')">1</button>
            <button class="key-button" (click)="addDigit('2')">2</button>
            <button class="key-button" (click)="addDigit('3')">3</button>
            
            <button class="key-button" (click)="addDigit('00')">00</button>
            <button class="key-button" (click)="addDigit('0')">0</button>
            <button class="key-button" (click)="addDigit('.')">.</button>
          </div>

          <!-- Below Keypad: Discount, Round, Print Bill -->
          <div class="keypad-bottom-actions">
            <button class="action-btn">Discount</button>
            <button class="action-btn">Round</button>
            <button class="action-btn">Print Bill</button>
          </div>
        </div>

        <!-- RIGHT: Split/Balance Actions (vertical) -->
        <div class="split-actions-right">
          <button class="split-btn">All</button>
          <button class="split-btn">1/n</button>
          <button class="split-btn">Split</button>
          <button class="split-btn">Balance</button>
        </div>

      </div>

      <!-- Clear and Backspace -->
      <div class="keypad-controls">
        <button class="control-btn" (click)="backspace()">Backspace</button>
        <button class="control-btn" (click)="clearAmount()">Clear</button>
      </div>

    </div>

    <!-- RIGHT COLUMN: Payment Methods -->
    <div class="payment-section">
      
      <button class="payment-btn" [class.active]="paymentType() === 'cash'" (click)="payWithMethod('cash')">
        Cash
      </button>
      
      <button class="payment-btn" [class.active]="paymentType() === 'card'" (click)="payWithMethod('card')">
        Card
      </button>
      
      <button class="payment-btn" [class.active]="paymentType() === 'mobile'" (click)="payWithMethod('mobile')">
        Mobile Money
      </button>
      
      <button class="payment-btn" [class.active]="paymentType() === 'account'" (click)="payWithMethod('account')">
        Account
      </button>

      <!-- Close Button at Bottom -->
      <button class="close-button" (click)="cancelCheckout()">
        Close
      </button>

    </div>
    
  </div>
</ion-content>
